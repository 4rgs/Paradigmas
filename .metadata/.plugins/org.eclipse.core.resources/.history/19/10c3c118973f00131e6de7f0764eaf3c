package cl.juego;

import java.awt.datatransfer.StringSelection;
import java.awt.datatransfer.Transferable;
import java.awt.dnd.DnDConstants;
import java.awt.dnd.DragGestureEvent;
import java.awt.dnd.DragGestureListener;
import java.awt.dnd.DragSource;
import java.awt.dnd.DragSourceContext;
import java.awt.dnd.DragSourceDragEvent;
import java.awt.dnd.DragSourceDropEvent;
import java.awt.dnd.DragSourceEvent;
import java.awt.dnd.DragSourceListener;
import java.awt.dnd.InvalidDnDOperationException;

import javax.swing.JLabel;

class DragLabel extends JLabel implements DragGestureListener, DragSourceListener {
	  private DragSource ds = DragSource.getDefaultDragSource();

	  public DragLabel(String s, int alignment) {
	    super(s, alignment);

	    int action = DnDConstants.ACTION_COPY_OR_MOVE;
	    ds.createDefaultDragGestureRecognizer(this, action, this);
	  }

	  public void dragGestureRecognized(DragGestureEvent e) {
	    try {
	      Transferable t = new StringSelection(getText());

	      e.startDrag(DragSource.DefaultCopyNoDrop, t, this);
	    } catch (InvalidDnDOperationException e2) {
	      System.out.println(e2);
	    }
	  }

	  public void dragDropEnd(DragSourceDropEvent e) {
	    System.out.println("Drag and drop end");

	    if (e.getDropSuccess() == false) {
	      System.out.println("unsuccessful");
	      return;
	    }

	    int action = e.getDropAction();
	    if ((action & DnDConstants.ACTION_MOVE) != 0)
	      setText("");
	  }

	  public void dragEnter(DragSourceDragEvent e) {
	    System.out.println("Entering drop target #2");

	    DragSourceContext ctx = e.getDragSourceContext();

	    int action = e.getDropAction();
	    if ((action & DnDConstants.ACTION_COPY) != 0)
	      ctx.setCursor(DragSource.DefaultCopyDrop);
	    else
	      ctx.setCursor(DragSource.DefaultCopyNoDrop);
	  }

	  public void dragExit(DragSourceEvent e) {
	    System.out.println("Exiting drop target #2");
	  }

	  public void dragOver(DragSourceDragEvent e) {
	    System.out.println("Dragging over drop target #2");
	  }

	  public void dropActionChanged(DragSourceDragEvent e) {
	    System.out.println("Drop action changed #2");
	  }
	}