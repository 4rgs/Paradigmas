package cl.juego;

import java.awt.BorderLayout;
import java.awt.Color;
import java.awt.datatransfer.DataFlavor;
import java.awt.datatransfer.StringSelection;
import java.awt.datatransfer.Transferable;
import java.awt.datatransfer.UnsupportedFlavorException;
import java.awt.dnd.DnDConstants;
import java.awt.dnd.DragGestureEvent;
import java.awt.dnd.DragGestureListener;
import java.awt.dnd.DragSource;
import java.awt.dnd.DragSourceContext;
import java.awt.dnd.DragSourceDragEvent;
import java.awt.dnd.DragSourceDropEvent;
import java.awt.dnd.DragSourceEvent;
import java.awt.dnd.DragSourceListener;
import java.awt.dnd.DropTarget;
import java.awt.dnd.DropTargetDragEvent;
import java.awt.dnd.DropTargetDropEvent;
import java.awt.dnd.DropTargetEvent;
import java.awt.dnd.DropTargetListener;
import java.awt.dnd.InvalidDnDOperationException;
import java.awt.event.ActionEvent;
import java.awt.event.ActionListener;

import javax.swing.JButton;
import javax.swing.JFrame;
import javax.swing.JLabel;

public class MainClass extends JFrame implements ActionListener, DropTargetListener {
  DragLabel source = new DragLabel("Drag and drop me to the following JButton", JLabel.CENTER);

  JButton target = new JButton();

  MainClass(String title) {
    super(title);
    setDefaultCloseOperation(JFrame.EXIT_ON_CLOSE);
    source.setForeground(Color.red);
    getContentPane().add(source, BorderLayout.NORTH);

    target.addActionListener(this);
    getContentPane().add(target, BorderLayout.SOUTH);

    new DropTarget(target, DnDConstants.ACTION_COPY_OR_MOVE, this);

    setSize(500, 500);

    setVisible(true);
  }

  public void actionPerformed(ActionEvent e) {
    JButton b = (JButton) e.getSource();
    b.setText("holaaa");
    source.setText("Drag and drop me to the following JButton");
  }

  public void dragEnter(DropTargetDragEvent e) {
    System.out.println("Entering drop target #1");
  }

  public void dragExit(DropTargetEvent e) {
    System.out.println("Exiting drop target #1");
  }

  public void dragOver(DropTargetDragEvent e) {
    System.out.println("Dragging over drop target #1");
  }

  public void drop(DropTargetDropEvent e) {
    System.out.println("Dropping");

    try {
      Transferable t = e.getTransferable();

      if (e.isDataFlavorSupported(DataFlavor.stringFlavor)) {
        e.acceptDrop(e.getDropAction());

        String s;
        s = (String) t.getTransferData(DataFlavor.stringFlavor);

        target.setText(s);

        e.dropComplete(true);
      } else
        e.rejectDrop();
    } catch (java.io.IOException e2) {
    } catch (UnsupportedFlavorException e2) {
    }
  }

  public void dropActionChanged(DropTargetDragEvent e) {
    System.out.println("Drop action changed #1");
  }

  public static void main(String[] args) {
    new MainClass("Drag and Drop Demo");
  }
}

